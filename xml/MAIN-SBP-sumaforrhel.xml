<?xml version="1.0" encoding="UTF-8"?>
<!--<?oxygen RNGSchema="http://www.oasis-open.org/docbook/xml/5.0/rng/docbook.rng" type="xml"?>-->
<!DOCTYPE article [
<!ENTITY % entity SYSTEM "entity-decl.ent">
%entity;
]>
<article role="sbp" xmlns="http://docbook.org/ns/docbook"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
    xml:id="art-sbp-suma-rhconnect" xml:lang="en">
    
    <info>
        <title>How to Directly Connect SUSE Manager to Red Hat Content
            Delivery Network</title>
        <subtitle>Methods to Receive Your Red Hat Updates and
            Patches</subtitle>
        <!--     <orgname>SUSE Best Practices</orgname>-->
        <productname>SUSE Manager</productname>
        <!--<productnumber>2.1 and 3</productnumber>-->
        <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
            <dm:bugtracker>
                <dm:url>https://github.com/SUSE/suse-best-practices/issues/new</dm:url>
                <dm:product>How to Directly Connect SUSE Manager to Red Hat Content
                    Delivery Network</dm:product>
            </dm:bugtracker>
            <dm:editurl>https://github.com/SUSE/suse-best-practices/edit/main/xml/</dm:editurl>
        </dm:docmanager>
        
        
            <meta name="series">SUSE Best Practices</meta> 
            <meta name="category">Systems Management</meta> 
            
            <meta name="platform">SUSE Manager</meta>    
            <!--<meta name="platform"></meta>  -->      
            
            <authorgroup>
            <author>
            <personname>
            <firstname>Cameron</firstname>
            <surname>Seader</surname>
            </personname>
            <affiliation>
            <jobtitle>Sales Engineer</jobtitle>
            <orgname>SUSE</orgname>
            </affiliation>
            </author>
            <author>
            <personname>
            <firstname>Donald</firstname>
            <surname>Vosburg</surname>
            </personname>
            <affiliation>
            <jobtitle>Sales Engineer</jobtitle>
            <orgname>SUSE</orgname>
            </affiliation>
            </author>
         <!--   <editor>
            <orgname></orgname>
            </editor>
            <othercredit>
            <orgname></orgname>
            </othercredit>-->
            </authorgroup>
        
        <cover role="logos">
            <mediaobject>
                <imageobject>
                    <imagedata fileref="suse.svg" width="4em"/>
                </imageobject>
            </mediaobject>
            <!--<mediaobject>
                <imageobject>
                    <imagedata fileref="microsoft.svg" width="6em"/>
                </imageobject>
            </mediaobject>-->
        </cover>

           <date>June 13, 2018</date>


        <abstract>
            <para>The described solution allows you to directly connect
                SUSE Manager to the Red Hat Content Delivery Network (CDN)
                to retrieve your software updates and patches.</para>

            <para>This is useful if you plan on continuing your agreement
                with Red Hat, and/or you do not want to use Expanded
                Support from SUSE. It is also useful when you have multiple
                distributions that you want to update and patch from SUSE
                Manager. Finally, it is helpful if you use an updated code
                stream of the Satellite 5 series, and continue your use of
                an enhanced road map to the Spacewalk project.</para>

            <para>You must have a current subscription with Red Hat. This
                in no way requires that you have a subscription to
                Satellite Server from Red Hat.</para>
            
            <para>
                <emphasis role="strong">Disclaimer: </emphasis>
                Documents published as part of the SUSE Best Practices series have been contributed voluntarily
                by SUSE employees and third parties. They are meant to serve as examples of how particular
                actions can be performed. They have been compiled with utmost attention to detail. However,
                this does not guarantee complete accuracy. SUSE cannot verify that actions described in these
                documents do what is claimed or whether actions described have unintended consequences.
                SUSE LLC, its affiliates, the authors, and the translators may not be held liable for possible errors
                or the consequences thereof.
            </para>
            
        </abstract>
    </info>


    <sect1 xml:id="sec-importrhcert">
        <title>Import Red Hat Entitlement and CA Certificate</title>

        <para>During the next few paragraphs, you will learn how to import
            the Red Hat CA and entitlement certificate.</para>

        <note>
            <title>Expiration Dates for Entitlement Certificates</title>
            <para>Entitlement certificates have embedded expiration dates
                tied to the length of the support subscription. You must
                repeat this process with updated entitlement certificates
                as needed to avoid disruption in channel mirroring.</para>
        </note>

        <sect2 xml:id="sec-entitlecert">
            <title>Entitlement Certificate</title>

            <para>Red Hat Subscription Manager is a local service which
                tracks installed products and subscriptions on a local
                system to help manage subscription assignments. To obtain
                your certificates, you must register your system using this
                subscription manager tool supplied by Red Hat. </para>

            <orderedlist>
                <listitem>
                    <para>Register with the subscription manager tool from
                        your Red Hat client. It will prompt you for your
                        user name and password for authentication on the
                        Red Hat Portal:</para>
                    <para>
                        <command>subscription-manager register</command>
                    </para>
                </listitem>
                <listitem>
                    <para>Navigate to the location of your entitlement
                        certificate and key, and copy these files to where
                        your Web browser connected to SUSE Manager can open
                        them:</para>
                    <para>
                        <command>cd /etc/pki/entitlement/</command>
                    </para>
                </listitem>
            </orderedlist>

            <para>You will see two files with the data file format
                extension <emphasis role="strong">.pem</emphasis> (Program
                Editor macro). One is the certificate, and the other is the
                key and it has the word <quote>key</quote> in the file
                name.</para>

        </sect2>

        <sect2 xml:id="sec-rhcacert">
            <title>Red Hat CA Certificate</title>

            <para>The next step is to get the Red Hat CA Certificate file.
                It is located on this same Red Hat system in the file
                    <filename>/etc/rhsm/ca/redhat-uep.pem</filename>. Place
                this file in the same location where, in the previous
                section, you put the entitlement certificate. </para>
        </sect2>

        <sect2 xml:id="sec-obtain-repo-url">
            <title>Obtain Repository URL list</title>

            <para>Use the subscription manager tool to obtain the URLâ€™s of
                the repositories you want to mirror:</para>
            <para>
                <command>subscription-manager repos</command>
            </para>

        </sect2>

        <sect2 xml:id="sec-import">
            <title>Import</title>

            <para>Now you are ready to import the Red Hat CA Certificate
                and Entitlement Certificate into SUSE Manager for software
                repository mirroring. You must create three entries here:
                one each for the entitlement certificate, the entitlement
                key, and the Red Hat CA certificate.</para>

            <para>Start your SUSE Manager. Go to the <emphasis
                    role="strong">Systems</emphasis> tab at the top. Click
                    <emphasis role="strong">Autoinstallation</emphasis> on
                the left pane. Then click <emphasis role="strong">GPG and
                    SSL Keys</emphasis> also on the left pane, as you can
                see it from the screenshot below.</para>

            <figure>
                <title>SUSE Manager GPG Public Keys and SSL
                    Certificates</title>
                <mediaobject>
                    <imageobject role="fo">
                        <imagedata fileref="suma-connect-rhcertimport.png"
                            width="95%" format="PNG"/>
                    </imageobject>
                    <imageobject role="html">
                        <imagedata fileref="suma-connect-rhcertimport.png"
                            width="90%" format="PNG"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>Click <emphasis role="strong">Create Stored
                    Key/Cert</emphasis> on the right. Another screen opens
                where you can fill in the required information.</para>

            <figure>
                <title>SUSE Manager Create GPG/SSL Keys</title>
                <mediaobject>
                    <imageobject role="fo">
                        <imagedata fileref="suma-connect-createkey.png"
                            width="95%" format="PNG"/>
                    </imageobject>
                    <imageobject role="html">
                        <imagedata fileref="suma-connect-createkey.png"
                            width="90%" format="PNG"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>Enter the following values, and ensure you enter the
                date:</para>
            <simplelist>
                <member><emphasis role="strong">Description</emphasis>:
                        Entitlement-Cert-<emphasis>date</emphasis></member>
                <member><emphasis role="strong">Type</emphasis>: Ensure you
                    select <emphasis>SSL</emphasis>
                </member>
                <member><emphasis role="strong">Select file to
                        upload</emphasis>: Browse to where you saved the
                    Entitlement Certificate .pem file and select
                    it.</member>
            </simplelist>

            <para>Click the <emphasis role="strong">Create Key</emphasis>
                button at the bottom.</para>


            <figure>
                <title>SUSE Manager Create Key Button</title>
                <mediaobject>
                    <imageobject role="fo">
                        <imagedata
                            fileref="suma-connect-buttoncreatekey.png"
                            width="30%" format="PNG"/>
                    </imageobject>
                    <imageobject role="html">
                        <imagedata
                            fileref="suma-connect-buttoncreatekey.png"
                            width="30%" format="PNG"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>Repeat the above steps for the Entitlement Key and change
                the values to match the following:</para>

            <simplelist>
                <member><emphasis role="strong">Description</emphasis>:
                        Entitlement-key-<emphasis>date</emphasis></member>
                <member><emphasis role="strong">Type</emphasis>:
                    SSL</member>
                <member><emphasis role="strong">Select file to
                        upload</emphasis>: Browse to the location where you
                    saved the Entitlement key .pem file and select
                    it.</member>
            </simplelist>

            <para>Repeat the above steps for the Red Hat CA Certificate
                    (<emphasis>redhat-uep</emphasis>) and change the values
                to match the following:</para>

            <simplelist>
                <member><emphasis role="strong">Description</emphasis>:
                    redhat-uep</member>
                <member><emphasis role="strong">Type</emphasis>:
                    SSL</member>
                <member><emphasis role="strong">Select file to
                        upload</emphasis>: Browse to the location where you
                    saved the Red Hat CA Certificate and select
                    it.</member>
            </simplelist>

            <para>You now have imported the Entitlement certificate, the
                Entitlement key and the Red Hat CA into SUSE Manager for
                use. Your outcome should look like the screen below:</para>

            <figure>
                <title>SUSE Manager Imported Red Hat Certificates</title>
                <mediaobject>
                    <imageobject role="fo">
                        <imagedata fileref="suma-connect-sumarhcert-2.png"
                            width="95%" format="PNG"/>
                    </imageobject>
                    <imageobject role="html">
                        <imagedata fileref="suma-connect-sumarhcert-2.png"
                            width="90%" format="PNG"/>
                    </imageobject>
                </mediaobject>
            </figure>

        </sect2>

    </sect1>

    <sect1 xml:id="sec-createrepos">
        <title>Create Software Repositories</title>

        <para>To mirror the software from the Red Hat CDN, you need to
            create custom channels and repositories in SUSE Manager that
            are linked to the CDN with their respective URL. This will only
            work if you have entitlements to these products in your Red Hat
            Portal. To create these software repositories you need to
            perform the following actions. </para>

        <para>On your SUSE Manager screen, go to the <emphasis
                role="strong">Software</emphasis>(or in older SUSE Manager
            versions, to the <emphasis role="strong">Channels</emphasis>)
            tab at top. Click <emphasis role="strong">Manage Software
                Channels</emphasis> on the left pane. Then click <emphasis
                role="strong">Manage Repositories</emphasis> also on the
            left pane.</para>

        <figure>
            <title>SUSE Manager Repositories</title>
            <mediaobject>
                <imageobject role="fo">
                    <imagedata fileref="suma-connect-sumarepo.png"
                        width="95%" format="PNG"/>
                </imageobject>
                <imageobject role="html">
                    <imagedata fileref="suma-connect-sumarepo.png"
                        width="90%" format="PNG"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>Click <emphasis role="bold">Create Repository</emphasis>. The
            following screen opens, where you can enter the required
            information to create the repository.</para>

        <figure>
            <title>SUSE Manager Create Repository</title>
            <mediaobject>
                <imageobject role="fo">
                    <imagedata fileref="suma-connect-sumacreaterepo.png"
                        width="95%" format="PNG"/>
                </imageobject>
                <imageobject role="html">
                    <imagedata fileref="suma-connect-sumacreaterepo.png"
                        width="90%" format="PNG"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>Fill in the fields with values, following the example
            below:</para>

        <!-- <note>
            <title> Double Use of Entitlement-Cert</title>
            <para>Entitlement-Cert is used twice for SSL Client Certificate
                and SSL Client Key. This is the certificate file you
                imported in one of the previous steps along with the
                redhat-uep for the SSL CA Certificate. </para>
        </note>-->

        <simplelist>
            <member><emphasis role="strong">Repository Label</emphasis>:
                rhel-7-server-rpms</member>
            <member><emphasis role="strong">Repository URL</emphasis>:
                https://cdn.redhat.com/content/dist/rhel/server/7/7Server/x86_64/os/</member>
            <member><emphasis role="strong">Has Signed
                Metadata?</emphasis>: Uncheck (Uncheck for all Red Hat
                Enterprise Repositories)</member>
            <member><emphasis role="strong">SSL CA Certificate</emphasis>:
                redhat-uep</member>
            <member><emphasis role="strong">SSL Client
                    Certificate</emphasis>:
                    Entitlement-Cert-<emphasis>date</emphasis></member>
            <member><emphasis role="strong">SSL Client Key</emphasis>:
                    Entitlement-Key-<emphasis>date</emphasis></member>
        </simplelist>


        <para>These steps need to be repeated for the Products / Repository
            URLs you define for your environment. </para>

        <bridgehead>Repository Values</bridgehead>

        <para>Use the output of repository URLâ€™s obtained earlier from the
            subscription manager tool to create other repositories to which
            you are entitled. Mirror only the content which you need to
            manage your systems.</para>

        <!--
            <para>The following repository values reflect the latest
                supported versions of Red Hat Enterprise Linux. Others
                follow similar naming in the repository URL and label. </para>

            <bridgehead>RHEL 7.2</bridgehead>

            <simplelist>
                <member>
                    <emphasis role="bold">Base Server Repository</emphasis>
                </member>
                <member>Repository Label: rhel-7-server-rpms</member>
                <member>Repository URL:
                    https://cdn.redhat.com/content/dist/rhel/server/7/7.2/x86_64/os/</member>
                <member>Has Signed Metadata?: Uncheck (Uncheck for all Red
                    Hat Enterprise Repositories)</member>
                <member>SSL CA Certificate: redhat-uep</member>
                <member>SSL Client Certificate: Entitlement-Cert</member>
                <member>SSL Client Key: Entitlement-Cert</member>
            </simplelist>

            <simplelist>
                <member>
                    <emphasis role="bold">Spacewalk Client
                        Repository</emphasis>
                </member>
                <member>Repository Label: RHEL 7 x86_64 Spacewalk Client
                    2.4</member>
                <member>Repository URL:
                    http://spacewalk.redhat.com/yum/2.4-client/RHEL/7/x86_64/</member>
                <member>Has Signed Metadata?: Uncheck (Uncheck for all Red
                    Hat Enterprise Repositories)</member>
                <member>SSL CA Certificate: none</member>
                <member>SSL Client Certificate: none</member>
                <member>SSL Client Key: none</member>
            </simplelist>

            <simplelist>
                <member>
                    <emphasis role="bold">Optional Repository</emphasis>
                </member>
                <member>Repository Label:
                    rhel-7-server-optional-rpms</member>
                <member>Repository URL:
                    https://cdn.redhat.com/content/dist/rhel/server/7/7.2/x86_64/os/</member>
                <member>Has Signed Metadata?: Uncheck (Uncheck for all Red
                    Hat Enterprise Repositories)</member>
                <member>SSL CA Certificate: redhat-uep</member>
                <member>SSL Client Certificate: Entitlement-Cert</member>
                <member>SSL Client Key: Entitlement-Cert</member>
            </simplelist>

            <simplelist>
                <member>
                    <emphasis role="bold">Supplementary
                        Repository</emphasis>
                </member>
                <member>Repository Label:
                    rhel-7-server-supplementary-rpms</member>
                <member>Repository URL:
                    https://cdn.redhat.com/content/dist/rhel/server/7/7.2/x86_64/os/</member>
                <member>Has Signed Metadata?: Uncheck (Uncheck for all Red
                    Hat Enterprise Repositories)</member>
                <member>SSL CA Certificate: redhat-uep</member>
                <member>SSL Client Certificate: Entitlement-Cert</member>
                <member>SSL Client Key: Entitlement-Cert</member>
            </simplelist>


            <bridgehead>RHEL 6</bridgehead>

            <simplelist>
                <member>
                    <emphasis role="bold">RHEL 6 Server (RPMs) Repository â€“
                        Base + updates/patches for 6</emphasis>
                </member>
                <member>Repository Label: rhel-6-server-rpms</member>
                <member>Repository URL:
                    https://cdn.redhat.com/content/dist/rhel/server/6/6Server/x86_64/os/</member>
                <member>Has Signed Metadata?: Uncheck (Uncheck for all Red
                    Hat Enterprise Repositories)</member>
                <member>SSL CA Certificate: redhat-uep></member>
                <member>SSL Client Certificate: Entitlement-Cert</member>
                <member>SSL Client Key: Entitlement-Cert</member>
            </simplelist>


            <bridgehead>RHEL 5.11</bridgehead>

            <simplelist>
                <member>
                    <emphasis role="bold">RHEL 5.11 Server (RPMs)
                        Repository â€“ Base + updates/patches for
                        5.11</emphasis>
                </member>
                <member>Repository Label: rhel-5.11-server-rpms</member>
                <member>Repository URL:
                    https://cdn.redhat.com/content/dist/rhel/server/5/5.11/x86_64/os/</member>
                <member>Has Signed Metadata?: Uncheck (Uncheck for all Red
                    Hat Enterprise Repositories)</member>
                <member>SSL CA Certificate: redhat-uep></member>
                <member>SSL Client Certificate: Entitlement-Cert</member>
                <member>SSL Client Key: Entitlement-Cert</member>
            </simplelist>

            <simplelist>
                <member>
                    <emphasis role="bold">RHEL 5.11 Server (Kickstart)
                        Repository</emphasis>
                </member>
                <member>
                    <emphasis role="bold">Description: This allows SUSE
                        Manager to kickstart a host and provides the
                        kickstart tree</emphasis>
                </member>
                <member>Repository Label:
                    rhel-5.11-server-kickstart</member>
                <member>Repository URL:
                    https://cdn.redhat.com/content/dist/rhel/server/5/5.11/x86_64/kickstart/</member>
                <member>Has Signed Metadata?: Uncheck (Uncheck for all Red
                    Hat Enterprise Repositories)</member>
                <member>SSL CA Certificate: redhat-uep</member>
                <member>SSL Client Certificate: Entitlement-Cert</member>
                <member>SSL Client Key: Entitlement-Cert</member>
            </simplelist>

            <simplelist>
                <member>
                    <emphasis role="bold">RHEL 5.11 Server (Supplementary
                        RPMs)</emphasis>
                </member>
                <member>Repository Label:
                    rhel-5.11-server-supplementary-rpms</member>
                <member>Repository URL:
                    https://cdn.redhat.com/content/dist/rhel/server/5/5.11/x86_64/supplementary/os/</member>
                <member>Has Signed Metadata?: Uncheck (Uncheck for all Red
                    Hat Enterprise Repositories)</member>
                <member>SSL CA Certificate: redhat-uep</member>
                <member>SSL Client Certificate: Entitlement-Cert</member>
                <member>SSL Client Key: Entitlement-Cert</member>
            </simplelist>

            <simplelist>
                <member>
                    <emphasis role="bold">RHEL 5.11 Server (Virtualization
                        RPMs)</emphasis>
                </member>
                <member>Repository Label:
                    rhel-5.11-server-virtualization-rpms</member>
                <member>Repository URL:
                    https://cdn.redhat.com/content/dist/rhel/server/5/5.11/x86_64/vt/os/</member>
                <member>Has Signed Metadata?: Uncheck (Uncheck for all Red
                    Hat Enterprise Repositories)</member>
                <member>SSL CA Certificate: redhat-uep</member>
                <member>SSL Client Certificate: Entitlement-Cert</member>
                <member>SSL Client Key: Entitlement-Cert</member>
            </simplelist>

            <simplelist>
                <member>
                    <emphasis role="bold">RHEL 5 Server Spacewalk Client
                        Repository</emphasis>
                </member>
                <member>Repository Label: RHEL 5 x86_64 Spacewalk Client
                    2.4</member>
                <member>Repository URL:
                    http://spacewalk.redhat.com/yum/2.4-client/RHEL/5/x86_64/</member>
                <member>Has Signed Metadata?: Uncheck (Uncheck for all Red
                    Hat Enterprise Repositories)</member>
                <member>SSL CA Certificate: none</member>
                <member>SSL Client Certificate: none</member>
                <member>SSL Client Key: none</member>
            </simplelist>

            <warning>
                <title>Work in Progress</title>
                <para>The following sections are work in progress. All of
                    the CDN URLs that can be used need to be discovered and
                    will be documented as they are discovered.</para>
            </warning>


            <bridgehead>Add-Ons</bridgehead>
            <!-\-
            <para>
                <simplelist>
                    <member>
                        <emphasis role="bold">High Availability</emphasis>
                    </member>
                </simplelist>
            </para>

            <para>
                <simplelist>
                    <member>
                        <emphasis role="bold">Resilient Storage</emphasis>
                    </member>
                </simplelist>
            </para>

            <para>
                <simplelist>
                    <member>
                        <emphasis role="bold">Load Balancer</emphasis>
                    </member>
                </simplelist>
            </para>

            <para>
                <simplelist>
                    <member>
                        <emphasis role="bold">Scalable File
                            System</emphasis>
                    </member>
                </simplelist>
            </para>-\->

            <simplelist>
                <member>
                    <emphasis role="bold">RH Common (RPMs)</emphasis>
                </member>
                <member>Repository URL:
                    https://cdn.redhat.com/content/dist/rhel/server/$rhelver/$releasever/$basearch/rh-common/os/</member>
                <member>$rhelver={5,6,7}</member>
                <member>$releasever={{5,6,7}Server,5.11,6.7,7.2}</member>
                <member>$basearch={x86_64,i686,s390x,ppc64}</member>
            </simplelist>

            <simplelist>
                <member>
                    <emphasis role="bold">Optional Productivity
                        Applications (RPMs)</emphasis>
                </member>
                <member>Repository URL:
                    https://cdn.redhat.com/content/dist/rhel/server/$rhelver/$releasever/$basearch/productivity/os/</member>
                <member>$rhelver={5,6,7}</member>
                <member>$releasever={{5,6,7}Server,5.11,6.7,7.2}</member>
                <member>$basearch={x86_64,i686,s390x,ppc64}</member>
            </simplelist>

            <simplelist>
                <member>
                    <emphasis role="bold">Fastrack</emphasis>
                </member>
                <member>Repository URL:
                    https://cdn.redhat.com/content/fastrack/rhel/server/$rhelver/$basearch/os/</member>
                <member>$rhelver={5,6,7}</member>
                <member>$basearch={x86_64,i386}</member>
            </simplelist>

            <!-\- <para>
                <simplelist>
                    <member>
                        <emphasis role="bold">Other Version CDN
                            URLs</emphasis>
                    </member>
                </simplelist>
            </para>-\->-->

    </sect1>

    <sect1 xml:id="sec-createswchannel">
        <title>Create Software Channel Delivery</title>

        <para>Next step is to create corresponding channels to which you
            assign these repositories.</para>

        <para>Click <emphasis role="strong">Channels</emphasis>, after that
            click <emphasis role="strong"> Manage Software Channels
            </emphasis>.</para>

        <sect2 xml:id="sec-parentchannels">
            <title>Parent Channels Example</title>

            <para>Click <emphasis role="strong">Create Channel</emphasis>
                and fill in the fields with at least the following
                values:</para>

            <simplelist>
                <member><emphasis role="strong">Channel Name</emphasis>:
                    RHEL 7 x86_64</member>
                <member><emphasis role="strong">Channel Label</emphasis>:
                    rhel7-x86_64-server</member>
                <member><emphasis role="strong">Parent Channel</emphasis>:
                    None</member>
                <member>
                    <emphasis role="strong">Architecture</emphasis>: x86_64 </member>
                <member><emphasis role="strong">Repository Checksum
                        Type</emphasis>: sha1</member>
                <member><emphasis role="strong">Channel Summary</emphasis>:
                    RHEL 7 x86_64</member>
                <member><emphasis role="strong">Organization
                        Sharing</emphasis>: Public</member>
            </simplelist>

            <para>After you have filled in the values, click again
                    <emphasis role="strong">Create
                Channel</emphasis>.</para>


            <para>On the screen below, click the tab <emphasis
                    role="strong">Repositories</emphasis>, and mark the
                check box next to the appropriate repository.</para>

            <figure>
                <title>Create Parent Channels</title>
                <mediaobject>
                    <imageobject role="fo">
                        <imagedata
                            fileref="suma-connect-parent-channel-1.png"
                            width="95%" format="PNG"/>
                    </imageobject>
                    <imageobject role="html">
                        <imagedata
                            fileref="suma-connect-parent-channel-1.png"
                            width="90%" format="PNG"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>On the next screen, click the tab <emphasis role="strong"
                    >Sync</emphasis> and set your preferred recurring
                schedule for synchronization for this repository. You can
                also select <emphasis role="strong">Sync Now</emphasis> to
                launch the synchronization immediately.</para>

            <figure>
                <title>Synchronize Parent Channels</title>
                <mediaobject>
                    <imageobject role="fo">
                        <imagedata
                            fileref="suma-connect-parent-channel-2.png"
                            width="95%" format="PNG"/>
                    </imageobject>
                    <imageobject role="html">
                        <imagedata
                            fileref="suma-connect-parent-channel-2.png"
                            width="90%" format="PNG"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <note>
                <title>Mirroring Duration</title>
                <para>Red Hat Server OS channels can grow to be very large.
                    Thus it can take several hours to complete mirroring.
                </para>
            </note>


        </sect2>

        <sect2 xml:id="sec-child-channels">
            <title>Child Channels example</title>

            <para>Click <emphasis role="strong">Create Channel</emphasis>
                and fill in the fields with at least the following
                values:</para>


            <simplelist>
                <member><emphasis role="strong">Channel Name</emphasis>:
                    RHEL 7 x86_64</member>
                <member><emphasis role="strong">Channel Label</emphasis>:
                    rhel7-x86_64-extras</member>
                <member><emphasis role="strong">Parent Channel</emphasis>:
                    rhel7-x86_64-server (from drop-down box)</member>
                <member>
                    <emphasis role="strong">Architecture</emphasis>: x86_64 </member>
                <member><emphasis role="strong">Repository Checksum
                        Type</emphasis>: sha1</member>
                <member><emphasis role="strong">Channel Summary</emphasis>:
                    RHEL 7 x86_64 Extras</member>
                <member><emphasis role="strong">Organization
                        Sharing</emphasis>: Public</member>
            </simplelist>

            <para>After you have filled in the values, click again
                    <emphasis role="strong">Create
                Channel</emphasis>.</para>


            <para>On the screen below, click the tab <emphasis
                    role="strong">Repositories</emphasis>, and mark the
                check box next to the appropriate repository.</para>

            <figure>
                <title>Create Parent Channels</title>
                <mediaobject>
                    <imageobject role="fo">
                        <imagedata
                            fileref="suma-connect-child-channel-1.png"
                            width="95%" format="PNG"/>
                    </imageobject>
                    <imageobject role="html">
                        <imagedata
                            fileref="suma-connect-child-channel-1.png"
                            width="90%" format="PNG"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>On the next screen, click the tab <emphasis role="strong"
                    >Sync</emphasis> and set your preferred recurring
                schedule for the synchronization of this repository. Ensure
                you scroll down and click <emphasis role="strong"
                    >Schedule</emphasis>. You can also select <emphasis
                    role="strong">Sync Now</emphasis> to launch the
                synchronization immediately.</para>

            <figure>
                <title>Create Parent Channels</title>
                <mediaobject>
                    <imageobject role="fo">
                        <imagedata
                            fileref="suma-connect-child-channel-2.png"
                            width="95%" format="PNG"/>
                    </imageobject>
                    <imageobject role="html">
                        <imagedata
                            fileref="suma-connect-child-channel-2.png"
                            width="90%" format="PNG"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>Now you can proceed to create the activation key in the
                SUSE Manager Web UI, and assign appropriate channels to
                it.</para>
        </sect2>
    </sect1>

    <sect1 xml:id="sec-registration">
        <title>Registration</title>

        <para>To register your systems, follow the steps described in the
            sections below.</para>

        <sect2 xml:id="sec-bootstrap-repo-creation">
            <title>Bootstrap Repository Creation</title>

            <para>SUSE Manager subscriptions entitle everyone to the tools
                channels for Red Hat Expanded Support (RES) distributions.
                Any Red Hat Enterprise Linux or CentOS 6 or 7 system should
                use these to create the proper bootstrap repository for
                either traditional or salt-minion connectivity.</para>

            <procedure>
                <step>
                    <para>Add the corresponding SUSE Manager RES tools
                        channel and allow it to synchronize from SUSE
                        Customer Center. You will need the 0-package parent
                        channel and the tools. Here is an example command
                        to add it for RES6 on AMD64/Intel 64:</para>

                    <screen>mgr-sync add channels rhel-x86_64-server-6 res6-suse-manager-tools-x86_64</screen>

                </step>
                <step>
                    <para>Follow the instructions to synchronize your base
                        media as a child repository for your distribution
                        based on Red Hat Enterprise Linux, as explained in
                        the SUSE Manager Wiki:</para>

                    <para>
                        <link
                            xlink:href="https://wiki.microfocus.com/index.php/SUSE_Manager/Sync_RHEL_media"
                            >https://wiki.microfocus.com/index.php/SUSE_Manager/Sync_RHEL_media</link>
                    </para>
                </step>
                <step>
                    <para>Create a bootstrap repository for your Red Hat
                        Enterprise Linux clients with</para>

                    <screen>mgr-create-bootstrap-repo --with-custom-channels</screen>

                </step>
            </procedure>

            <para>This will use the base media channel to capture needed
                dependencies. Ensure that it completes without
                error.</para>
        </sect2>

        <sect2 xml:id="sec-minion-registration">
            <title>Minion Registration</title>

            <para>On the client machine(s), perform the following steps to
                register the minion using a bootstrap script
                (recommended):</para>

            <procedure>
                <step>
                    <para>If needed, regenerate the bootstrap script with
                        the <option>Salt</option> option enabled:</para>
                    <screen>mgr-bootstrap --salt --script=bootstrap-salt.sh</screen>
                </step>
                <step>
                    <para>Download and run the appropriately edited
                        bootstrap script after adding the correct
                        activation key and other parameters. This will
                        install the necessary Salt packages, set the proper
                        activation key, and start the salt-minion
                        service:</para>
                    <screen>curl -Sks http://&lt;server>/pub/bootstrap/bootstrap-salt.sh | /bin/bash</screen>
                </step>
                <step>
                    <para>In the SUSE Manager Web UI, go to <emphasis
                            role="strong">Salt</emphasis>, click <emphasis
                            role="strong">Onboarding</emphasis> and accept
                        the minion's key.</para>
                </step>
            </procedure>

            <para>After a few minutes, the new minion will appear in your
                list of systems with the channels assigned in the
                activation key you specified in the bootstrap
                process.</para>

        </sect2>

    </sect1>

    <!--    <sect1 xml:id="sec-reposynch">
        <title>Repository Scheduling and Synchronizing</title>

        <para>Now you can synchronize the repositories and add a
            synchronization schedule.</para>

        <para>First, click <emphasis role="bold">Channels</emphasis>, after
            that click your <emphasis role="bold"> Sub Channel </emphasis>
            and go to your <emphasis role="bold">Repositories
                Tab</emphasis>. Click the <emphasis role="bold">Sync
                Sub</emphasis> tab. Finally, click <emphasis role="bold"
                >Sync Now</emphasis> to start the synchronization. </para>
    </sect1>-->



    <!--    <sect1 xml:id="sec-debugging">
        <title>Debugging Repositories</title>

        <para>You can find a short overview how to debug your repository
            here <link
                xlink:href="https://wiki.microfocus.com/index.php?title=SUSE_Manager/DebugReposync"
            />
        </para>

        <para>Example:</para>

        <screen>
suma:/ # export URLGRABBER_DEBUG=DEBUG

suma:/ # spacewalk-repo-sync -c Â rhel-5.11-server-x86_64-rpms Â > \
rhel_5.11_x86_64_server_debug.log 2> &amp;1

suma:/ # unset URLGRABBER_DEBUG

        </screen>

        <para>This instruction will send all output to a file specified
            after the redirect in the shell. The channel specified in the
            example above has a repository associated with it that is
            connecting to the Red Hat Content Delivery Network URL.</para>
    </sect1>-->

    <sect1 xml:id="sec-references">
        <title>References</title>

        <para>For more information, see:</para>

        <orderedlist>
            <listitem>
                <para>Using and Configuring Red Hat Subscription Manager:
                        <link
                        xlink:href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html-single/rhsm/index"
                    />
                </para>
            </listitem>
            <!-- <member>
                <link xlink:href="http://elrepo.org/tiki/tiki-index.php"/>
            </member>-->
            <listitem>
                <para>Get Started with Red Hat Subscription Management:
                        <link
                        xlink:href="https://access.redhat.com/articles/433903"
                    />
                </para>
            </listitem>
            <!--<member>
                <link
                    xlink:href="https://www.redhat.com/archives/spacewalk-list/2015-March/msg00051.html"
                />
            </member>-->
            <listitem>
                <para>Update spacewalk-create-channels: <link
                        xlink:href="https://github.com/kgibson/spacewalk/blob/master/spacewalk-create-channels"
                    />
                </para>
            </listitem>
            <!-- <member>
                <link
                    xlink:href="https://www.redhat.com/archives/spacewalk-list/2012-August/msg00046.html"
                />
            </member>-->
            <!--<member>
                <link
                    xlink:href="ftp://ftp.redhat.com/pub/redhat/linux/enterprise/"
                />
            </member>-->
            <listitem>
                <para>Wiki article <quote>SUSE Manager/Sync RHEL
                        media</quote>: <link
                        xlink:href="https://wiki.microfocus.com/index.php?title=SUSE_Manager/Sync_RHEL_media"
                    />
                </para>
            </listitem>
            <listitem>
                <para>Red Hat Enterprise Linux Release Dates: <link
                        xlink:href="https://access.redhat.com/articles/3078"
                    />
                </para>
            </listitem>
            <listitem>
                <para>Best Practices - SUSE Manager 3.1: <link
                        xlink:href="https://www.suse.com/documentation/suse-manager-3/book_suma_best_practices_3/data/mgr_expanded_support.html"
                    />
                </para>
            </listitem>

        </orderedlist>

        <!--
        <bridgehead>CERN Repo files:</bridgehead>

        <simplelist>
            <member>
                <link
                    xlink:href="http://linux.web.cern.ch/linux/rhel/repofiles/rhel5.repo"
                />
            </member>
            <member>
                <link
                    xlink:href="http://linux.web.cern.ch/linux/rhel/repofiles/rhel6.repo"
                />
            </member>
            <member>
                <link
                    xlink:href="http://linux.web.cern.ch/linux/rhel/repofiles/rhel7.repo"
                />
            </member>
        </simplelist>-->

    </sect1>
    
    <?pdfpagebreak style="sbp" formatter="fop"?>
        <xi:include href="sbp-legal-notice.xml"/>

    <?pdfpagebreak style="sbp" formatter="fop"?>
    <xi:include href="license-gfdl.xml"/>

</article>
